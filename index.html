      <!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: #f2f2f2;
      color: #111;
    }
    .container {
      max-width: 520px;
      margin: 0 auto;
      padding: 12px;
    }
    .card {
      background: #fff;
      border-radius: 16px;
      padding: 14px;
      margin-bottom: 12px;
      box-shadow: 0 4px 14px rgba(0,0,0,.08);
    }
    h2 { margin: 0 0 8px; font-size: 18px; }
    label { font-size: 14px; margin-top: 10px; display: block; }
    input, select {
      width: 100%; margin-top: 6px; padding: 12px; font-size: 16px;
      border-radius: 12px; border: 1px solid #ddd;
    }
    .checkbox { display: flex; gap: 10px; align-items: center; margin-top: 10px; }
    .checkbox label { font-weight: 600; }
    .checkbox input[type=checkbox] { transform: scale(1.3); accent-color: #2563eb; }
    button {
      width: 100%; padding: 16px; font-size: 18px; border-radius: 16px;
      border: none; background: #2563eb; color: #fff; font-weight: 600;
    }

    /* –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
    .result-screen {
      position: fixed;
      inset: 0;
      background: #f2f2f2;
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    .screen {
      width: 100%;
      height: 100%;
      max-width: 520px;
      background: #fff;
      padding: 16px;
      overflow-y: auto;
    }
    .line { margin-bottom: 8px; font-size: 16px; }
    .block { margin-top: 16px; }
    .total { margin-top: 16px; font-size: 22px; font-weight: 700; }
    .btn-secondary {
      background: #e5e7eb;
      color: #111;
      margin-top: 12px;
    }
    a.action {
      display: block;
      margin-top: 20px;
      padding: 16px;
      text-align: center;
      font-size: 18px;
      font-weight: 600;
      border-radius: 16px;
      background: #2563eb;
      color: #fff;
      text-decoration: none;
    }
  </style>
</head>
<body>

<div class="container" id="calcScreen">

  <div class="card">
    <h2>üìê –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞</h2>

    <label>–ü–µ—Ä–∏–º–µ—Ç—Ä —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞, –º</label>
    <input id="perimeter" type="text" placeholder="40 –º–µ—Ç—Ä–æ–≤" onfocus="this.value=''" />

    <label>–í—ã–±—Ä–∞—Ç—å —Ç–æ–ª—â–∏–Ω—É –ª–µ–Ω—Ç—ã</label>
    <select id="width">
      <option value="0.3">0.3 –º</option>
      <option value="0.4">0.4 –º</option>
    </select>

    <label>–í—ã—Å–æ—Ç–∞ –ª–µ–Ω—Ç—ã, –º</label>
    <input id="height" type="text" placeholder="0.5 –º–µ—Ç—Ä–æ–≤" onfocus="this.value=''" />

    <label>–î–ª–∏–Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫, –º</label>
    <input id="partitions" type="text" placeholder="10 –º–µ—Ç—Ä–æ–≤" onfocus="this.value=''" />

    <label>–í—ã–±—Ä–∞—Ç—å —Ç–æ–ª—â–∏–Ω—É –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫</label>
    <select id="partWidth">
      <option value="0.3">0.3 –º</option>
      <option value="0.4">0.4 –º</option>
    </select>

    <div class="checkbox">
      <input id="formwork" type="checkbox" checked />
      <label for="formwork">–ê—Ä–µ–Ω–¥–∞ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–π –æ–ø–∞–ª—É–±–∫–∏</label>
    </div>
  </div>

  <div class="card">
    <h2>üöö –ë–µ—Ç–æ–Ω</h2>
    <select id="concrete">
      <option value="5500">M200 ‚Äî 5 500 ‚ÇΩ / –º¬≥</option>
      <option value="6000">M250 ‚Äî 6 000 ‚ÇΩ / –º¬≥</option>
      <option value="6500">M300 ‚Äî 6 500 ‚ÇΩ / –º¬≥</option>
    </select>
  </div>

  <button onclick="calc()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å</button>
</div>

<!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
<div class="result-screen" id="resultScreen">
  <div class="screen" id="resultContent"></div>
</div>

<script>
function calc(){
  const p = parseFloat(perimeter.value) || 0;
  const w = +width.value;
  const h = parseFloat(height.value) || 0;
  const part = parseFloat(partitions.value) || 0;
  const pw = +partWidth.value;
  const priceConcrete = +concrete.value;

  const volume = p*w*h + part*pw*h;
  const gravelVolume = (p*w + part*pw) * 0.3;
  const concreteCost = volume * priceConcrete;
  const gravelCost = gravelVolume * 250;

  const rebarMeters = (p + part) * 8;
  const rebarCost = rebarMeters * 46;
  const rebarFrames = (p + part) * 4; // 4 –∫–∞—Ä–∫–∞—Å–∞ –Ω–∞ –ø–æ–≥–æ–Ω–Ω—ã–π –º–µ—Ç—Ä —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞
  const rebarFramesCost = rebarFrames * 50;

  const formworkCost = formwork.checked ? volume * 1000 : 0;
  const formworkTransport = formwork.checked ? 5000 : 0;

  // –î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ–¥—Å—ã–ø–∫–∏: 1 –º–∞—à–∏–Ω–∞ = 4 –º¬≥, 1500 —Ä—É–±/–≤—ã–µ–∑–¥
  const gravelTrucks = Math.ceil(gravelVolume / 4);
  const gravelTransportCost = gravelTrucks * 1500;

  const workTrench = (p + part) * 200;
  const workGravel = (p + part) * 350;
  const workConcrete = volume * 2500;
  const workRebar = rebarMeters * 35;

  const materialsTotal = concreteCost + gravelCost + gravelTransportCost + rebarCost + rebarFramesCost + formworkCost + formworkTransport;
  const worksTotal = workTrench + workGravel + workConcrete + workRebar;
  const total = materialsTotal + worksTotal;

  resultContent.innerHTML = `
    <h2>üìä –ú–∞—Ç–µ—Ä–∏–∞–ª—ã</h2>
    <div class='line'>üöö –ë–µ—Ç–æ–Ω: ${concreteCost.toLocaleString()} ‚ÇΩ</div>
    <div class='line'>–ü–æ–¥—Å—ã–ø–∫–∞: ${gravelCost.toLocaleString()} ‚ÇΩ</div>
    <div class='line'>–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ–¥—Å—ã–ø–∫–∏: ${gravelTransportCost.toLocaleString()} ‚ÇΩ</div>
    <div class='line'>–ê—Ä–º–∞—Ç—É—Ä–∞: ${rebarCost.toLocaleString()} ‚ÇΩ</div>
    <div class='line'>–ö–∞—Ä–∫–∞—Å –¥–ª—è –∞—Ä–º–∞—Ç—É—Ä—ã: ${rebarFramesCost.toLocaleString()} ‚ÇΩ</div>
    ${formwork.checked ? `<div class='line'>–û–ø–∞–ª—É–±–∫–∞ (–≤–µ—Å—å –æ–±—ä–µ–∫—Ç): ${formworkCost.toLocaleString()} ‚ÇΩ</div>` : ``}
    ${formwork.checked ? `<div class='line'>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–∞–ª—É–±–∫–∏: ${formworkTransport.toLocaleString()} ‚ÇΩ</div>` : ``}
    <div class='line'><b>–ò—Ç–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:</b> ${materialsTotal.toLocaleString()} ‚ÇΩ</div>

    <div class='block'>
      <h2>üöú –†–∞–±–æ—Ç—ã</h2>
      <div class='line'>–ö–æ–ø–∫–∞ —Ç—Ä–∞–Ω—à–µ–∏: ${workTrench.toLocaleString()} ‚ÇΩ</div>
      <div class='line'>–ü–æ–¥—Å—ã–ø–∫–∞: ${workGravel.toLocaleString()} ‚ÇΩ</div>
      <div class='line'>–°–±–æ—Ä–∫–∞ –∫–∞—Ä–∫–∞—Å–æ–≤ –∞—Ä–º–∞—Ç—É—Ä—ã: ${workRebar.toLocaleString()} ‚ÇΩ</div>
      <div class='line'>–°–±–æ—Ä–∫–∞ –æ–ø–∞–ª—É–±–∫–∏ –∏ –ø—Ä–∏—ë–º –±–µ—Ç–æ–Ω–∞: ${workConcrete.toLocaleString()} ‚ÇΩ</div>
      <div class='line'><b>–ò—Ç–æ–≥–æ —Ä–∞–±–æ—Ç—ã:</b> ${worksTotal.toLocaleString()} ‚ÇΩ</div>
    </div>

    <div class='total'>–ò–¢–û–ì–û –ó–ê –§–£–ù–î–ê–ú–ï–ù–¢: ${total.toLocaleString()} ‚ÇΩ</div>

    <a class='action' href='https://max.ru/join/ywAl4IILOviUMdpEWbk_OrjOFCN4c6q1GANv-omzGrw' target='_blank'>üëâ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –≤ Max</a>
    <button class='btn-secondary' onclick='closeResult()'>‚¨Ö –ù–∞–∑–∞–¥ –∫ —Ä–∞—Å—á—ë—Ç—É</button>
  `;

  document.getElementById('calcScreen').style.display = 'none';
  document.getElementById('resultScreen').style.display = 'flex';
}

function closeResult(){
  document.getElementById('resultScreen').style.display = 'none';
  document.getElementById('calcScreen').style.display = 'block';
}
</script>

</body>
</html>
