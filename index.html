<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ª–µ–Ω—Ç–æ—á–Ω–æ–≥–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
/* –ë–∞–∑–æ–≤—ã–π reset –∏ –º–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0;padding:0}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:#f2f2f2;-webkit-text-size-adjust:100%;display:flex;justify-content:center;align-items:center;height:100vh;overflow:hidden}
.container{max-width:520px;width:100%;background:#fff;padding:16px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.1);transition:transform 0.3s ease}
h1{text-align:center;font-size:20px;margin-bottom:10px}
label{display:block;margin-top:12px;font-weight:600;font-size:14px}
input,select{width:100%;padding:12px;margin-top:6px;font-size:16px;border-radius:8px;border:1px solid #ccc;appearance:none;-webkit-appearance:none}
select{background:#fff}
button{margin-top:16px;width:100%;padding:14px;font-size:17px;background:#27ae60;color:#fff;border:none;border-radius:10px;transition:transform 0.1s}
button:active{transform:scale(0.98)}
.result{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.95);padding:20px;box-sizing:border-box;display:none;z-index:1000;overflow-y:auto;transition:opacity 0.3s ease, transform 0.3s ease;opacity:0;transform:translateY(30px);text-align:center}
.result.show{display:block;opacity:1;transform:translateY(0)}
.result button{background:#2980b9;margin-top:20px}
.note{font-size:12px;color:#777;margin-top:8px;text-align:center}
.checkbox{display:flex;align-items:center;gap:10px;margin-top:16px;font-size:14px;font-weight:600;cursor:pointer}
.checkbox input{display:none}
.checkbox span{width:22px;height:22px;border:2px solid #27ae60;border-radius:6px;display:inline-block;position:relative;flex-shrink:0}
.checkbox input:checked + span::after{content:'';position:absolute;left:5px;top:1px;width:6px;height:12px;border:solid #27ae60;border-width:0 3px 3px 0;transform:rotate(45deg)}
</style>
</head>
<body>
<div class="container" id="mainContainer">
<h1>–õ–µ–Ω—Ç–æ—á–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç</h1>

<label>–ü–µ—Ä–∏–º–µ—Ç—Ä —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞ (–º)
<input id="perimeter" type="number" step="0.1" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 40"></label>

<label>–®–∏—Ä–∏–Ω–∞ –ª–µ–Ω—Ç—ã (–º)
<select id="width">
  <option value="0.3">0.3 –º</option>
  <option value="0.4" selected>0.4 –º</option>
</select>
</label>

<label>–í—ã—Å–æ—Ç–∞ –ª–µ–Ω—Ç—ã (–º)
<input id="height" type="number" step="0.1" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 0.6"></label>

<label>–î–ª–∏–Ω–∞ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫ (–º)
<input id="partitionLengthInput" type="number" step="0.1" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 10"></label>

<label>–®–∏—Ä–∏–Ω–∞ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏ (–º)
<select id="partitionWidth">
  <option value="0.3">0.3 –º</option>
  <option value="0.4" selected>0.4 –º</option>
</select>
</label>

<label>–ú–∞—Ä–∫–∞ –±–µ—Ç–æ–Ω–∞
<select id="concrete">
<option value="5500">M200 ‚Äî 5500 ‚ÇΩ/–º¬≥</option>
<option value="6000">M250 ‚Äî 6000 ‚ÇΩ/–º¬≥</option>
<option value="6500">M300 ‚Äî 6500 ‚ÇΩ/–º¬≥</option>
</select></label>

<label class="checkbox">
  <input type="checkbox" id="formwork" checked>
  <span></span>
  –ê—Ä–µ–Ω–¥–∞ –æ–ø–∞–ª—É–±–∫–∏ (400 ‚ÇΩ / –ø–æ–≥. –º)
</label>

<button onclick="calc()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã</button>
<button onclick="calcWork()">–†–∞—Å—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç</button>

<div class="note">* –†–∞—Å—á—ë—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π</div>
</div>

<div class="result" id="result"></div>

<script>
function getValues(){
  return {
    P: +document.getElementById('perimeter').value,
    W: +document.getElementById('width').value,
    H: +document.getElementById('height').value,
    partitionLength: +document.getElementById('partitionLengthInput').value,
    partitionWidth: +document.getElementById('partitionWidth').value,
    priceConcrete: +document.getElementById('concrete').value,
    formwork: document.getElementById('formwork').checked
  };
}

function showResult(html){
  const result = document.getElementById('result');
  result.innerHTML = html + '<br><button onclick="hideResult()">–í–µ—Ä–Ω—É—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ</button>';
  result.classList.add('show');
  document.getElementById('mainContainer').style.display = 'none';
}

function hideResult(){
  const result = document.getElementById('result');
  result.classList.remove('show');
  setTimeout(()=>{result.style.display='none'},300);
  document.getElementById('mainContainer').style.display = 'block';
}

function calc(){
  const {P,W,H,partitionLength,partitionWidth,priceConcrete,formwork} = getValues();
  if(!P||!W||!H){alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');return;}
  const volumeConcrete = P*W*H + partitionLength*partitionWidth*H;
  const costConcrete = volumeConcrete * priceConcrete;
  const gravelLayer = 0.3;
  const volumeGravel = P*W*gravelLayer + partitionLength*partitionWidth*gravelLayer;
  const costGravel = volumeGravel * 250;
  const rebarLength = P*8 + partitionLength*8;
  const costRebar = rebarLength * 38;
  const frames = Math.ceil(P*4 + partitionLength*4);
  const costFrames = frames * 50;
  let costFormwork = 0;
  if(formwork){ costFormwork = (P + partitionLength) * 400; }
  const total = costConcrete + costGravel + costRebar + costFrames + costFormwork;
  showResult(`<b>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:</b><br><br>üß± –ë–µ—Ç–æ–Ω: ${volumeConcrete.toFixed(2)} –º¬≥ ‚Äî ${costConcrete.toFixed(0)} ‚ÇΩ<br>ü™® –ü–æ–¥—Å—ã–ø–∫–∞: ${volumeGravel.toFixed(2)} –º¬≥ ‚Äî ${costGravel.toFixed(0)} ‚ÇΩ<br>üî© –ê—Ä–º–∞—Ç—É—Ä–∞: ${rebarLength.toFixed(1)} –º ‚Äî ${costRebar.toFixed(0)} ‚ÇΩ<br>üß≤ –†–∞–º–∫–∏: ${frames} —à—Ç ‚Äî ${costFrames.toFixed(0)} ‚ÇΩ<br>üß± –û–ø–∞–ª—É–±–∫–∞: ${costFormwork.toFixed(0)} ‚ÇΩ<br><br><b>üí∞ –ò—Ç–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã: ${total.toFixed(0)} ‚ÇΩ</b>`);
}

function calcWork(){
  const {P,partitionLength,W,H} = getValues();
  if(!P||!W||!H){alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã');return;}
  const totalLength = P + partitionLength;
  const volumeConcrete = P*W*H + partitionLength*W*H;
  const transportFormwork = 4000;
  const trenchWork = totalLength * 200;
  const gravelWork = totalLength * 350;
  const concreteWork = volumeConcrete * 2000;
  const rebarWork = totalLength * 8 * 25;
  const totalWork = transportFormwork + trenchWork + gravelWork + concreteWork + rebarWork;
  showResult(`<b>–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç:</b><br><br>‚õè –ö–æ–ø–∫–∞ —Ç—Ä–∞–Ω—à–µ–∏: ${trenchWork.toFixed(0)} ‚ÇΩ<br>üöö –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–∞–ª—É–±–∫–∏: ${transportFormwork} ‚ÇΩ<br>ü™® –ü–æ–¥—Å—ã–ø–∫–∞: ${gravelWork.toFixed(0)} ‚ÇΩ<br>üß± –ó–∞–ª–∏–≤–∫–∞ –±–µ—Ç–æ–Ω–∞: ${concreteWork.toFixed(0)} ‚ÇΩ<br>üî© –í—è–∑–∫–∞ –∞—Ä–º–∞—Ç—É—Ä—ã: ${rebarWork.toFixed(0)} ‚ÇΩ<br><br><b>üí∞ –ò—Ç–æ–≥–æ —Ä–∞–±–æ—Ç—ã: ${totalWork.toFixed(0)} ‚ÇΩ</b>`);
}
</script>
</body>
</html>
